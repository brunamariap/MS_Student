// database
datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

// generator
generator client {
    provider             = "prisma-client-py"
    interface            = "sync"
    recursive_type_depth = 5
}

model Student {
    id                  String                @id @default(uuid())
    name                String
    registration        BigInt
    dateOfBirth         DateTime
    picture             String?
    classId             String
    notes               Note[]
    grades              Grade[]
    StudentParticipates StudentParticipates[]
    StudentDisciplines  StudentDisciplines[]
}

model Note {
    id          String   @id @default(uuid())
    title       String
    description String
    studentId   String
    student     Student  @relation(fields: [studentId], references: [id], onDelete: Cascade)
    createdBy   String
    createdAt   DateTime @default(now())
}

model Grade {
    id           String  @id @default(uuid())
    score        Int
    bimester     Int
    disciplineId String
    attributedBy String
    studentId    String
    student      Student @relation(fields: [studentId], references: [id], onDelete: Cascade)
    diaryId      String
}

model StudentParticipates {
    id        String  @id @default(uuid())
    studentId String
    student   Student @relation(fields: [studentId], references: [id], onDelete: Cascade)
    eventId   String
}

model StudentDisciplines {
    id           String  @id @default(uuid())
    studentId    String
    student      Student @relation(fields: [studentId], references: [id], onDelete: Cascade)
    disciplineId String
}
